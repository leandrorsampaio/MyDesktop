<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Desktop</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="appHeader">
        <div class="appHeader__welcome">
            <h1 class="appHeader__title">Welcome, Leandro</h1>
            <div class="appHeader__dateInfo">
                <span class="js-currentDate"></span>
                <span class="appHeader__separator">â€¢</span>
                <span class="js-currentWeekday"></span>
                <span class="appHeader__separator">â€¢</span>
                <span class="js-currentWeek"></span>
            </div>
        </div>
        <div class="appHeader__actions">
            <div class="toolbar js-toolbar">
                <div class="toolbar__filters js-categoryFilters">
                    <!-- Filter buttons rendered by JS from CATEGORIES -->
                </div>
                <button class="toolbar__priorityBtn js-priorityFilterBtn">â˜… Priority</button>
                <div class="toolbar__divider"></div>
                <button class="toolbar__privacyBtn js-privacyToggleBtn">Hide</button>
            </div>
            <button class="navMenu__trigger js-menuBtn" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav class="navMenu__dropdown js-dropdownMenu">
                <button class="navMenu__item js-viewReportsBtn">
                    <span class="navMenu__icon">ðŸ“Š</span> View Reports
                </button>
                <button class="navMenu__item js-viewArchivedBtn">
                    <span class="navMenu__icon">ðŸ“¦</span> All Completed Tasks
                </button>
                <button class="navMenu__item js-crisisModeBtn">
                    <span class="navMenu__icon">ðŸš¨</span> Crisis Mode
                </button>
            </nav>
        </div>
    </header>

    <div class="appContainer js-appContainer">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <!-- Recurrent Tasks Section -->
            <daily-checklist class="sidebar__section"></daily-checklist>

            <!-- Notes Section -->
            <notes-widget class="sidebar__section"></notes-widget>
        </aside>

        <!-- Main Kanban Board -->
        <main class="kanban">
            <kanban-column data-status="todo" class="column js-todoList">
                <span slot="title">To Do</span>
                <button slot="actions" class="column__addBtn js-addTaskBtn">+ Add Task</button>
            </kanban-column>

            <kanban-column data-status="wait" class="column js-waitList">
                <span slot="title">Wait</span>
            </kanban-column>

            <kanban-column data-status="inprogress" class="column js-inprogressList">
                <span slot="title">In Progress</span>
            </kanban-column>

            <kanban-column data-status="done" class="column js-doneList">
                <span slot="title">Done</span>
                <button slot="actions" class="column__reportBtn js-reportBtn">Report</button>
                <button slot="actions" class="column__archiveBtn js-archiveBtn">Archive</button>
            </kanban-column>
        </main>
    </div>

    <!-- Add/Edit Task Modal -->
    <modal-dialog class="js-taskModal">
        <h2 slot="title" class="js-modalTitle">Add Task</h2>
        <form class="taskForm js-taskForm">
            <div class="taskForm__group">
                <label>Title *</label>
                <input type="text" class="js-taskTitle" required placeholder="Enter task title" />
            </div>
            <div class="taskForm__group">
                <label>Description</label>
                <textarea class="js-taskDescription" placeholder="Enter task description" rows="4"></textarea>
            </div>
            <div class="taskForm__group taskForm__checkboxGroup">
                <label>
                    <input type="checkbox" class="js-taskPriority" />
                    <span class="taskForm__priorityLabel">Priority Task</span>
                </label>
            </div>

            <div class="taskForm__group">
                <label>Category</label>
                <div class="taskForm__categorySelector">
                    <label class="taskForm__categoryPill"><input type="radio" name="task-category" value="1" checked /><span>Non categorized</span></label>
                    <label class="taskForm__categoryPill"><input type="radio" name="task-category" value="2" /><span>Development</span></label>
                    <label class="taskForm__categoryPill"><input type="radio" name="task-category" value="3" /><span>Communication</span></label>
                    <label class="taskForm__categoryPill"><input type="radio" name="task-category" value="4" /><span>To Remember</span></label>
                    <label class="taskForm__categoryPill"><input type="radio" name="task-category" value="5" /><span>Planning</span></label>
                    <label class="taskForm__categoryPill"><input type="radio" name="task-category" value="6" /><span>Generic Task</span></label>
                </div>
            </div>

            <!-- Task Log (only shown in edit mode) -->
            <div class="taskForm__group taskForm__log js-taskLogSection" style="display: none;">
                <label>Activity Log</label>
                <ul class="taskForm__logList js-taskLogList">
                    <!-- Log entries will be rendered here -->
                </ul>
            </div>

            <div class="modal__actions js-taskModalActions">
                <!-- Buttons are now dynamically inserted by app.js -->
            </div>
        </form>
    </modal-dialog>

    <!-- Reports Modal -->
    <div class="modal js-reportsModal">
        <div class="modal__content --large">
            <div class="modal__header">
                <h2>Reports</h2>
                <button class="modal__closeBtn js-reportsModalClose">&times;</button>
            </div>
            <div class="reportsView js-reportsContainer">
                <!-- Reports list or single report view will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Archived Tasks Modal -->
    <div class="modal js-archivedModal">
        <div class="modal__content --large">
            <div class="modal__header">
                <h2>All Completed Tasks</h2>
                <button class="modal__closeBtn js-archivedModalClose">&times;</button>
            </div>
            <div class="archivedView js-archivedContainer">
                <!-- Archived tasks list will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal js-confirmModal">
        <div class="modal__content --small">
            <div class="modal__header">
                <h2>Confirm Delete</h2>
            </div>
            <p>Are you sure you want to delete this task? This action cannot be undone.</p>
            <div class="modal__actions">
                <button type="button" class="btn --cancel js-confirmCancel">Cancel</button>
                <button type="button" class="btn --delete js-confirmDelete">Delete</button>
            </div>
        </div>
    </div>

    <!-- Edit Checklist Modal -->
    <div class="modal js-checklistModal">
        <div class="modal__content --large">
            <div class="modal__header">
                <h2>Edit Daily Checklist</h2>
                <button class="modal__closeBtn js-checklistModalClose">&times;</button>
            </div>
            <div class="checklistEditor">
                <p class="checklistEditor__hint">Add tasks to your daily checklist. Optionally add a URL to open when clicking the link icon.</p>
                <div class="checklistEditor__items js-checklistItemsContainer">
                    <!-- Checklist items will be rendered here -->
                </div>
                <button type="button" class="checklistEditor__addBtn js-addChecklistItemBtn">+ Add Item</button>
                <div class="modal__actions">
                    <div class="modal__actionsRight">
                        <button type="button" class="btn --cancel js-checklistCancelBtn">Cancel</button>
                        <button type="button" class="btn --save js-checklistSaveBtn">Save Checklist</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="components/button/button.js"></script>
    <script type="module" src="components/task-card/task-card.js"></script>
    <script type="module" src="components/modal-dialog/modal-dialog.js"></script>
    <script type="module" src="components/daily-checklist/daily-checklist.js"></script>
    <script type="module" src="components/notes-widget/notes-widget.js"></script>
    <script type="module" src="components/kanban-column/kanban-column.js"></script>
    <script src="app.js" defer></script>
</body>
</html>
